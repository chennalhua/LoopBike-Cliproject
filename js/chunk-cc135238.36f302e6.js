(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc135238"],{b0c0:function(e,t,c){var a=c("83ab"),l=c("9bf2").f,s=Function.prototype,r=s.toString,n=/^\s*function ([^ (]*)/,o="name";a&&!(o in s)&&l(s,o,{configurable:!0,get:function(){try{return r.call(this).match(n)[1]}catch(e){return""}}})},da25:function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),l={class:"col-11"},s={class:"p-4"},r=Object(a["g"])("h2",{class:"h4"},"客戶訂單",-1),n={class:"bg-light p-4 rounded vh-100 table-responsive"},o={class:"table table-hover"},d=Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",{width:"80"},"訂單日期"),Object(a["g"])("th",{class:"text-center"},"訂購人"),Object(a["g"])("th",null,"購買品項"),Object(a["g"])("th",{width:"200",class:"text-end"},"付款金額"),Object(a["g"])("th",{width:"120",class:"text-center"},"付款狀態"),Object(a["g"])("th",{width:"150",class:"text-center"},"編輯")])],-1),i={class:"text-center"},b={class:"list-unstyled"},O={class:"text-end"},u={class:"text-center"},j={class:"form-check form-switch"},p={class:"text-center"},g={class:"btn-group",role:"group","aria-label":"Basic example"},h={class:"border-0"};function f(e,t,c,f,m,v){var y=Object(a["x"])("Loading"),w=Object(a["x"])("Pagination"),k=Object(a["x"])("orderModal"),x=Object(a["x"])("deleteModal");return Object(a["s"])(),Object(a["d"])(a["a"],null,[m.loading?(Object(a["s"])(),Object(a["d"])(y,{key:0})):Object(a["e"])("",!0),Object(a["g"])("div",l,[Object(a["g"])("div",s,[r,Object(a["g"])("div",n,[Object(a["g"])("table",o,[d,Object(a["g"])("tbody",null,[(Object(a["s"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(m.orders,(function(t){return Object(a["s"])(),Object(a["d"])("tr",{key:t.id},[Object(a["g"])("td",null,Object(a["A"])(e.dateConversion(t.create_at)),1),Object(a["g"])("td",i,Object(a["A"])(t.user.name),1),Object(a["g"])("td",null,[Object(a["g"])("ul",b,[(Object(a["s"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(t.products,(function(e,t){return Object(a["s"])(),Object(a["d"])("li",{key:t},Object(a["A"])(e.product.title)+" x "+Object(a["A"])(e.qty),1)})),128))])]),Object(a["g"])("td",O,Object(a["A"])(e.toCurrency(t.total)),1),Object(a["g"])("td",u,[Object(a["g"])("div",j,[Object(a["I"])(Object(a["g"])("input",{"onUpdate:modelValue":function(e){return t.is_paid=e},class:"form-check-input checked",type:"checkbox",id:t.id,onChange:function(e){return v.updateOrder(t)}},null,40,["onUpdate:modelValue","id","onChange"]),[[a["D"],t.is_paid]]),t.is_paid?(Object(a["s"])(),Object(a["d"])("label",{key:0,class:"form-check-label text-success fw-bold",for:t.id},"已付款 ",8,["for"])):(Object(a["s"])(),Object(a["d"])("label",{key:1,class:"form-check-label",for:t.id},"未付款 ",8,["for"]))])]),Object(a["g"])("td",p,[Object(a["g"])("div",g,[Object(a["g"])("button",{type:"button",class:"btn btn-outline-primary",onClick:function(e){return v.openModal("view",t)}},"檢視",8,["onClick"]),Object(a["g"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return v.openModal("delete",t)}},"刪除",8,["onClick"])])])])})),128))]),Object(a["g"])("tfoot",null,[Object(a["g"])("tr",null,[Object(a["g"])("td",h,[Object(a["g"])(w,{page:m.pagination,onUpdatePage:v.getOrder},null,8,["page","onUpdatePage"])])])])])])]),Object(a["g"])(k,{order:m.tempOrder,ref:"openOrderModal",onUpdateOrder:v.updateOrder},null,8,["order","onUpdateOrder"]),Object(a["g"])(x,{order:m.tempOrder,ref:"openOrderDeleteModal",onDeleteData:v.deleteSingleOrder},null,8,["order","onDeleteData"])])],64)}var m=c("5530"),v=(c("99af"),c("29e4")),y={class:"modal fade",ref:"modal",id:"orderModal",tabindex:"-1","aria-labelledby":"orderModal","aria-hidden":"true"},w={class:"modal-dialog modal-xl"},k={class:"modal-content"},x=Object(a["g"])("div",{class:"modal-header bg-primary text-light"},[Object(a["g"])("h5",{class:"modal-title",id:"orderModal"},"檢視"),Object(a["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),M={class:"modal-body"},A={class:"container"},C={class:"row"},D={class:"col-4"},$=Object(a["g"])("h5",{class:"text-primary"},"訂購人資訊",-1),_={key:0,class:"list-unstyled"},U={class:"py-2"},P=Object(a["g"])("span",{class:"fw-bold"},"姓名：",-1),S={class:"py-2"},V=Object(a["g"])("span",{class:"fw-bold"},"電話：",-1),q={class:"py-2"},I=Object(a["g"])("span",{class:"fw-bold"},"地址：",-1),J={class:"py-2"},L=Object(a["g"])("span",{class:"fw-bold"},"信箱：",-1),B={class:"col-8"},F=Object(a["g"])("h5",{class:"text-primary"},"訂單細節",-1),z={key:0,class:"list-unstyled"},E={class:"py-2"},G=Object(a["g"])("span",{class:"fw-bold"},"訂單編號：",-1),H={class:"py-2"},K=Object(a["g"])("span",{class:"fw-bold"},"訂單日期：",-1),N={class:"py-2"},Q=Object(a["g"])("span",{class:"fw-bold"},"付款狀態：",-1),R={key:0,class:"fw-bold text-success"},T={key:1,class:"fw-bold text-danger"},W={class:"py-2"},X=Object(a["g"])("span",{class:"fw-bold"},"總金額：",-1),Y=Object(a["g"])("hr",null,null,-1),Z=Object(a["g"])("h5",{class:"text-primary"},"選購商品",-1),ee={class:"list-unstyled"},te={class:"col-8"},ce={class:"fw-bold"},ae={class:"col-2"},le={class:"col-2 text-end"},se=Object(a["g"])("hr",null,null,-1),re={class:"form-check ms-auto"},ne=Object(a["g"])("label",{class:"form-check-label",for:"isPaid"},"是否付款",-1),oe={class:"modal-footer"};function de(e,t,c,l,s,r){return Object(a["s"])(),Object(a["d"])("div",y,[Object(a["g"])("div",w,[Object(a["g"])("div",k,[x,Object(a["g"])("div",M,[Object(a["g"])("div",A,[Object(a["g"])("div",C,[Object(a["g"])("div",D,[$,s.tempOrder.user?(Object(a["s"])(),Object(a["d"])("ul",_,[Object(a["g"])("li",U,[P,Object(a["f"])(" "+Object(a["A"])(s.tempOrder.user.name),1)]),Object(a["g"])("li",S,[V,Object(a["f"])(" "+Object(a["A"])(s.tempOrder.user.tel),1)]),Object(a["g"])("li",q,[I,Object(a["f"])(" "+Object(a["A"])(s.tempOrder.user.address),1)]),Object(a["g"])("li",J,[L,Object(a["f"])(" "+Object(a["A"])(s.tempOrder.user.email),1)])])):Object(a["e"])("",!0)]),Object(a["g"])("div",B,[Object(a["g"])("div",null,[F,s.tempOrder.user?(Object(a["s"])(),Object(a["d"])("ul",z,[Object(a["g"])("li",E,[G,Object(a["f"])(" "+Object(a["A"])(s.tempOrder.id),1)]),Object(a["g"])("li",H,[K,Object(a["f"])(" "+Object(a["A"])(e.dateConversion(s.tempOrder.create_at)),1)]),Object(a["g"])("li",N,[Q,s.tempOrder.is_paid?(Object(a["s"])(),Object(a["d"])("span",R,"已付款")):(Object(a["s"])(),Object(a["d"])("span",T,"未付款"))]),Object(a["g"])("li",W,[X,Object(a["f"])(" "+Object(a["A"])(e.toCurrency(s.tempOrder.total)),1)])])):Object(a["e"])("",!0),Y]),Object(a["g"])("div",null,[Z,Object(a["g"])("ul",ee,[(Object(a["s"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(s.tempOrder.products,(function(t,c){return Object(a["s"])(),Object(a["d"])("li",{class:"py-2 row",key:c},[Object(a["g"])("div",te,[Object(a["g"])("span",ce,Object(a["A"])(t.product.title),1)]),Object(a["g"])("div",ae,[Object(a["g"])("span",null,Object(a["A"])(t.qty)+" / "+Object(a["A"])(t.product.unit),1)]),Object(a["g"])("div",le,[Object(a["g"])("span",null,Object(a["A"])(e.toCurrency(t.total)),1)])])})),128))]),se]),Object(a["g"])("div",null,[Object(a["g"])("div",re,[Object(a["I"])(Object(a["g"])("input",{id:"isPaid","onUpdate:modelValue":t[1]||(t[1]=function(e){return s.tempOrder.is_paid=e}),class:"form-check-input checked",type:"checkbox"},null,512),[[a["D"],s.tempOrder.is_paid]]),ne])])])])])]),Object(a["g"])("div",oe,[Object(a["g"])("button",{type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=function(e){return r.closeModal()})},"關閉"),Object(a["g"])("button",{type:"button",class:"btn btn-primary text-light",onClick:t[3]||(t[3]=function(t){return e.$emit("updateOrder",s.tempOrder)})},"儲存")])])])],512)}var ie=c("7c2b"),be=c.n(ie),Oe={props:["order"],data:function(){return{modal:"",tempOrder:[]}},watch:{order:function(){this.tempOrder=this.order}},methods:{openModal:function(){this.modal.show()},closeModal:function(){this.modal.hide()}},mounted:function(){this.modal=new be.a(this.$refs.modal)}};Oe.render=de;var ue=Oe,je=c("1843"),pe=c("3a5e"),ge={data:function(){return{orders:[],pagination:{},tempOrder:{},loading:!0}},components:{Pagination:v["a"],orderModal:ue,deleteModal:je["a"],Loading:pe["a"]},methods:{getOrder:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vip899629","/admin/orders?page=").concat(t);this.$http.get(c).then((function(t){t.data.success&&(e.orders=t.data.orders,e.pagination=t.data.pagination,e.loading=!1)})).catch((function(e){console.log(e)}))},updateOrder:function(e){var t=this;this.tempOrder=e;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vip899629","/admin/order/").concat(this.tempOrder.id);this.$http.put(c,{data:this.tempOrder}).then((function(e){if(e.data.success){alert("更新成功");var c=t.$refs.openOrderModal;c.closeModal(),t.getOrder()}})).catch((function(e){console.log(e)}))},deleteSingleOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vip899629","/admin/order/").concat(this.tempOrder.id);this.$http.delete(t).then((function(t){if(t.data.success){alert("刪除成功");var c=e.$refs.openOrderDeleteModal;c.closeModal(),e.getOrder()}})).catch((function(e){console.log(e)}))},openModal:function(e,t){if("view"===e){this.tempOrder=Object(m["a"])({},t);var c=this.$refs.openOrderModal;c.openModal()}else if("delete"===e){this.tempOrder=Object(m["a"])({},t);var a=this.$refs.openOrderDeleteModal;a.openModal()}}},mounted:function(){this.getOrder()}};ge.render=f;t["default"]=ge}}]);
//# sourceMappingURL=chunk-cc135238.36f302e6.js.map