(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2431684f"],{d416:function(t,e,c){"use strict";c.r(e);var o=c("7a23"),n={class:"col-11"},l={class:"p-4"},a=Object(o["g"])("h2",{class:"h4"},"產品管理",-1),d={class:"bg-light p-4 rounded vh-100"},r={class:"table table-hover"},i=Object(o["g"])("thead",null,[Object(o["g"])("tr",null,[Object(o["g"])("th",{width:"120"},"分類"),Object(o["g"])("th",null,"產品名稱"),Object(o["g"])("th",{width:"120",class:"text-end"},"原價"),Object(o["g"])("th",{width:"120",class:"text-end"},"售價"),Object(o["g"])("th",{width:"120",class:"text-center"},"上架狀態"),Object(o["g"])("th",{width:"180",class:"text-center"},"編輯")])],-1),s={class:"text-center"},u={class:"form-check form-switch"},b={class:"text-center"},p={class:"btn-group",role:"group","aria-label":"Basic example"},g={class:"border-0"};function O(t,e,c,O,m,j){var f=Object(o["x"])("Loading"),h=Object(o["x"])("Pagination"),v=Object(o["x"])("ProductModal"),P=Object(o["x"])("DeleteModal");return Object(o["s"])(),Object(o["d"])(o["a"],null,[m.loading?(Object(o["s"])(),Object(o["d"])(f,{key:0})):Object(o["e"])("",!0),Object(o["g"])("div",n,[Object(o["g"])("div",l,[a,Object(o["g"])("div",d,[Object(o["g"])("button",{type:"button",class:"btn btn-primary\n                text-light d-block ms-auto mb-4",onClick:e[1]||(e[1]=function(e){return j.openModal("add",t.item)})},"新增產品"),Object(o["g"])("table",r,[i,Object(o["g"])("tbody",null,[(Object(o["s"])(!0),Object(o["d"])(o["a"],null,Object(o["w"])(m.products,(function(e){return Object(o["s"])(),Object(o["d"])("tr",{key:e.id},[Object(o["g"])("td",null,Object(o["A"])(e.category),1),Object(o["g"])("td",null,Object(o["A"])(e.title),1),Object(o["g"])("td",{textContent:Object(o["A"])(t.toCurrency(e.origin_price)),class:"text-end"},null,8,["textContent"]),Object(o["g"])("td",{textContent:Object(o["A"])(t.toCurrency(e.price)),class:"text-end"},null,8,["textContent"]),Object(o["g"])("td",s,[Object(o["g"])("div",u,[Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":function(t){return e.is_enabled=t},class:"form-check-input checked",type:"checkbox",id:e.id,"true-value":1,"false-value":0,onChange:function(t){return j.updateProduct(e)}},null,40,["onUpdate:modelValue","id","onChange"]),[[o["D"],e.is_enabled]]),e.is_enabled?(Object(o["s"])(),Object(o["d"])("label",{key:0,class:"form-check-label text-success fw-bold",for:e.id},"上架 ",8,["for"])):(Object(o["s"])(),Object(o["d"])("label",{key:1,class:"form-check-label",for:e.id},"未上架 ",8,["for"]))])]),Object(o["g"])("td",b,[Object(o["g"])("div",p,[Object(o["g"])("button",{type:"button",class:"btn btn-outline-primary",onClick:function(t){return j.openModal("edit",e)}},"編輯",8,["onClick"]),Object(o["g"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return j.openModal("del",e)}},"刪除",8,["onClick"])])])])})),128))]),Object(o["g"])("tfoot",null,[Object(o["g"])("tr",null,[Object(o["g"])("td",g,[Object(o["g"])(h,{page:m.pagination,onUpdatePage:j.getProducts},null,8,["page","onUpdatePage"])])])])]),Object(o["g"])(v,{ref:"productModal",isNew:m.isNew,product:m.tempProduct,onUpdateProduct:j.updateProduct},null,8,["isNew","product","onUpdateProduct"]),Object(o["g"])(P,{ref:"deleteModal",product:m.tempProduct,onDeleteData:j.deletePeoduct},null,8,["product","onDeleteData"])])])])],64)}var m=c("5530"),j=(c("99af"),c("a4d3"),c("e01a"),{class:"modal fade",ref:"modal",id:"PorductModal",tabindex:"-1","aria-labelledby":"PorductModal","aria-hidden":"true"}),f={class:"modal-dialog modal-xl"},h={class:"modal-content"},v={class:"modal-header bg-primary text-light"},P={class:"modal-title",id:"proModal"},y=Object(o["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),x={class:"modal-body"},w={class:"container"},k={class:"row"},M={class:"col-4"},U=Object(o["g"])("label",{for:"mainImg"},"主要圖片",-1),C={class:"col-8"},I={class:"mb-2"},N=Object(o["g"])("label",{for:"productTitle"},"標題",-1),V={class:"row mb-2"},$={class:"col-6"},D=Object(o["g"])("label",{for:"productCategory"},"分類",-1),E={class:"col-6"},S=Object(o["g"])("label",{for:"productUnit"},"單位",-1),_={class:"row mb-2"},A={class:"col-6"},J=Object(o["g"])("label",{for:"productOriginPrice"},"原價",-1),L={class:"col-6"},T=Object(o["g"])("label",{for:"productPrice"},"售價",-1),B=Object(o["g"])("hr",null,null,-1),q={class:"mb-2"},z=Object(o["g"])("label",{for:"productDes"},"產品描述",-1),F={class:"mb-2"},G=Object(o["g"])("label",{for:"productContent"},"產品內容",-1),H={class:"form-check"},K=Object(o["g"])("label",{class:"form-check-label",for:"isEnabled"},"是否上架",-1),Q={class:"modal-footer"};function R(t,e,c,n,l,a){return Object(o["s"])(),Object(o["d"])("div",j,[Object(o["g"])("div",f,[Object(o["g"])("div",h,[Object(o["g"])("div",v,[Object(o["g"])("h5",P,Object(o["A"])(c.isNew?"新增產品":"編輯產品"),1),y]),Object(o["g"])("div",x,[Object(o["g"])("div",w,[Object(o["g"])("div",k,[Object(o["g"])("div",M,[Object(o["g"])("div",null,[U,Object(o["I"])(Object(o["g"])("input",{type:"text",id:"mainImg",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=function(t){return l.tempProduct.imageUrl=t})},null,512),[[o["E"],l.tempProduct.imageUrl]]),Object(o["g"])("img",{src:l.tempProduct.imageUrl,alt:"",class:"img-fluid"},null,8,["src"])])]),Object(o["g"])("div",C,[Object(o["g"])("div",I,[N,Object(o["I"])(Object(o["g"])("input",{type:"text",id:"productTitle",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=function(t){return l.tempProduct.title=t})},null,512),[[o["E"],l.tempProduct.title]])]),Object(o["g"])("div",V,[Object(o["g"])("div",$,[D,Object(o["I"])(Object(o["g"])("input",{type:"text",id:"productCategory",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=function(t){return l.tempProduct.category=t})},null,512),[[o["E"],l.tempProduct.category]])]),Object(o["g"])("div",E,[S,Object(o["I"])(Object(o["g"])("input",{type:"text",id:"productUnit",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=function(t){return l.tempProduct.unit=t})},null,512),[[o["E"],l.tempProduct.unit]])])]),Object(o["g"])("div",_,[Object(o["g"])("div",A,[J,Object(o["I"])(Object(o["g"])("input",{type:"text",id:"productOriginPrice",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=function(t){return l.tempProduct.origin_price=t})},null,512),[[o["E"],l.tempProduct.origin_price,void 0,{number:!0}]])]),Object(o["g"])("div",L,[T,Object(o["I"])(Object(o["g"])("input",{type:"text",id:"productPrice",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=function(t){return l.tempProduct.price=t})},null,512),[[o["E"],l.tempProduct.price,void 0,{number:!0}]])])]),B,Object(o["g"])("div",q,[z,Object(o["I"])(Object(o["g"])("textarea",{type:"text",id:"productDes",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=function(t){return l.tempProduct.description=t})},null,512),[[o["E"],l.tempProduct.description]])]),Object(o["g"])("div",F,[G,Object(o["I"])(Object(o["g"])("textarea",{type:"text",id:"productContent",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=function(t){return l.tempProduct.content=t})},null,512),[[o["E"],l.tempProduct.content]])]),Object(o["g"])("div",H,[Object(o["I"])(Object(o["g"])("input",{id:"isEnabled","onUpdate:modelValue":e[9]||(e[9]=function(t){return l.tempProduct.is_enabled=t}),class:"form-check-input checked",type:"checkbox","true-value":1,"false-value":0},null,512),[[o["D"],l.tempProduct.is_enabled]]),K])])])])]),Object(o["g"])("div",Q,[Object(o["g"])("button",{type:"button",class:"btn btn-secondary",onClick:e[10]||(e[10]=function(t){return a.closeModal()})},"關閉"),Object(o["g"])("button",{type:"button",class:"btn btn-primary text-light",onClick:e[11]||(e[11]=function(e){return t.$emit("updateProduct",l.tempProduct)})},"儲存")])])])],512)}var W=c("7c2b"),X=c.n(W),Y={props:["isNew","product"],data:function(){return{modal:"",tempProduct:{}}},watch:{product:function(){this.tempProduct=this.product}},methods:{openModal:function(){this.modal.show()},closeModal:function(){this.modal.hide()}},mounted:function(){this.modal=new X.a(this.$refs.modal)}};Y.render=R;var Z=Y,tt=c("1843"),et=c("29e4"),ct=c("3a5e"),ot={data:function(){return{products:[],isNew:!1,tempProduct:{imagesUrl:[]},pagination:{},loading:!0}},components:{ProductModal:Z,DeleteModal:tt["a"],Pagination:et["a"],Loading:ct["a"]},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vip899629","/admin/products?page=").concat(e);this.$http.get(c).then((function(e){e.data.success&&(t.products=e.data.products,t.pagination=e.data.pagination,t.loading=!1)}))},updateProduct:function(t){var e=this;this.tempProduct=t;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vip899629","/admin/product/"),o="post";this.isNew||(c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vip899629","/admin/product/").concat(this.tempProduct.id),o="put"),this.$http[o](c,{data:this.tempProduct}).then((function(t){if(console.log(t),t.data.success){var c=e.$refs.productModal;c.closeModal(),e.getProducts(),e.loading=!1}else alert(t.data.message)})).catch((function(t){console.log(t)}))},deletePeoduct:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vip899629","/admin/product/").concat(this.tempProduct.id);this.$http.delete(e).then((function(e){if(e.data.success){var c=t.$refs.deleteModal;c.closeModal(),t.getProducts(),t.loading=!1}else alert(e.data.message)})).catch((function(t){console.log(t)}))},openModal:function(t,e){var c=this.$refs.productModal;if("add"===t)this.tempProduct={},this.isNew=!0,c.openModal();else if("edit"===t)this.tempProduct=JSON.parse(JSON.stringify(e)),this.isNew=!1,c.openModal();else if("del"===t){this.tempProduct=Object(m["a"])({},e);var o=this.$refs.deleteModal;o.openModal()}}},mounted:function(){this.getProducts()}};ot.render=O;e["default"]=ot},e01a:function(t,e,c){"use strict";var o=c("23e7"),n=c("83ab"),l=c("da84"),a=c("5135"),d=c("861d"),r=c("9bf2").f,i=c("e893"),s=l.Symbol;if(n&&"function"==typeof s&&(!("description"in s.prototype)||void 0!==s().description)){var u={},b=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof b?new s(t):void 0===t?s():s(t);return""===t&&(u[e]=!0),e};i(b,s);var p=b.prototype=s.prototype;p.constructor=b;var g=p.toString,O="Symbol(test)"==String(s("test")),m=/^Symbol\((.*)\)[^)]+$/;r(p,"description",{configurable:!0,get:function(){var t=d(this)?this.valueOf():this,e=g.call(t);if(a(u,t))return"";var c=O?e.slice(7,-1):e.replace(m,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:b})}}}]);
//# sourceMappingURL=chunk-2431684f.4971d770.js.map